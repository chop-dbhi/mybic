{
  "name": "Mybic",
  "tagline": "myBiC bioinformatics portal",
  "body": "## Introduction\r\nmyBiC is a web application for presenting analysis deliverables from the CHOP Bioinformatics Core to researchers. myBiC uses Django to handle Active Directory authentication and navigation.\r\n\r\nMost projects will consist of a single index page (`index.html` or `index.md`) and links to several `static` files. \r\n\r\nStatic files are those that are not parsed by the Django template engine, such as data files, pdfs, images, and stylesheets.\r\n\r\nBoth the index page and the static content should reside on the Isilon. There are management scripts within myBiC which manage symlinks to that content. The mount is read-only.\r\n\r\n## The myBiC workflow\r\n1. Create a repo in Github for your project\r\n2. Create a directory on the Isilon for your large project deliverables\r\n3. Create the index.md file in Github (recommended) or on the Isilon, can also be HTML if necessary\r\n4. Edit myBiC Users/Groups/Labs as needed\r\n5. Create a project in myBiC\r\n\r\n## Understanding the authentication system\r\nmyBiC uses dirt simple users/groups authentication system but it can accomodate private projects, public projects, and projects accessible by members of more than one lab.\r\n\r\n* `Labs` belong to a single `Group`. Labs are generally created at the same time as Groups in the Group admin http://mybic.chop.edu/admin/auth/group/\r\n* `Projects` belong to a single `Lab`.\r\n*  `Users` can belong to multiple `Groups`. \r\n\r\nBelow is the Wallace group. Members of the Wallace group can see projects in both the Pei and Wallace labs.\r\n![](https://dl.dropboxusercontent.com/u/4055239/modify_a_group.png)\r\nIf we wanted to create projects that only members of the Pei lab could see, we would have to create another `Lab` instance called, for example \"Private Pei\", and a new `Group` \"Pei\" to which \"Private Pei\" and those group members could belong.\r\n\r\n### Masquerading as a User\r\nAs an admin you will see all Groups, all Labs, all Projects. To debug authentication, it may be helpful to assign yourself to certain groups using the Admin interface and \"masquerade\" as a common user. The \"View as\" toggle in the Admin menu that allows you to view myBiC as a user or admin. This setting persists as a session.\r\n\r\n![](https://dl.dropboxusercontent.com/u/4055239/admindropdown.png)\r\n\r\n## Creating a Group and Lab\r\nGo to http://mybic.chop.edu/admin/auth/group/\r\n\r\nSelect \"Add group\". Fill in the Group name.\r\n\r\nAdd Labs - the `name` can be quite fancy but the `slug` should consist of solely of letters, numbers, underscores or hyphens.\r\n\r\n## Creating Users\r\nhttp://mybic.chop.edu/admin/auth/user\r\n\r\nSelect \"Add user\". Use the Active Directory username. The password field will not be used by myBiC.\r\n\r\n## Starting a project\r\nGo to http://mybic.chop.edu/admin/labs/project/\r\n\r\nSelect \"Add project\". Follow the instructions. The directories you specify must exist and should be as specific (as far down the directory tree) as possible.\r\nOn the myBiC server our Isilon mount is called `/mnt/variome`. On variome and raboso it is called `/nas/is1`. On respublica it is called `/mnt/isilon/cbmi/variome/`.\r\n\r\nBy default, if you leave out the leading slash MyBiC will assume you mean `/mnt/variome/`, so `leipzig/err-rna-seq/` will be understood to mean `/mnt/variome/leipzig/err-rna-seq/'.\r\n\r\n![](https://dl.dropboxusercontent.com/u/4055239/project_admin.png)\r\n\r\n### Friends of BiG\r\nYou should always use the full path for these mounts to BiG-affiliated labs.\r\n* `/mnt/cbttc` - Resnick Lab\r\n* `/mnt/NGS_data` - Spinner Lab\r\n\r\n## Updating a project\r\n![](https://dl.dropboxusercontent.com/u/4055239/admindropdown.png)\r\n\r\nThe admin menu provides a shortcut to the project admin page.\r\n\r\nTo reload index and child pages from with the project, use the \"Refresh project\" menu item\r\n\r\n## Creating an index page\r\nIndex pages can be files on the Isilon or simply web pages served by Github, and they can be HTML or Markdown (recommended).\r\n\r\n## Autoflank\r\n`autoflank` is a project option that automatically adds the correct template tags to your markdown or HTML document to ensure it displays correct on myBiC.\r\n![](https://dl.dropboxusercontent.com/u/4055239/autoflank.png)\r\n\r\n## Django Template tags\r\nIf you are not using \"autoflank\". The index page you point to will need the following tags at the top for navigation:\r\n```\r\n{% extends \"base.html\" %}\r\n\r\n{% block content %}\r\n```\r\nand this one at the bottom:\r\n```\r\n{% endblock %}\r\n```\r\n## Using Markdown\r\nSome or all of the index page can be written in [Markdown](daringfireball.net/projects/markdown/).\r\nIf not using `autoflank`, you will need to load the Markdown library and template tag.\r\n\r\n```\r\n{% extends \"base.html\" %}\r\n{% load markdown_tags %}\r\n{% block content %}\r\n{% markdown %}\r\n```\r\n\r\n```\r\n{% endmarkdown %}\r\n{% endblock %}\r\n```\r\n\r\nHTML is valid within Markdown.\r\n\r\n## Static links\r\nWhen you create a project you specify an absolute path on the Isilon to the static directory where all your deliverables should reside.\r\n\r\n![](https://dl.dropboxusercontent.com/u/4055239/staticdir.png)\r\n\r\nThis is assigned to the `SLINK` Django template variable which you can use in your index page.\r\n\r\nSo to link to a static file `/mnt/variome/leipzig/liming_err_rnaseq/src/raw_counts.tab.txt` the static directory should be set to `/mnt/variome/leipzig/liming_err_rnaseq/src/` and the link will look like:\r\n\r\n```\r\n<p><a href=\"{{ SLINK }}/raw_counts.tab.txt\">Raw HT-Seq Counts</a></p>\r\n```\r\n\r\n### Example \r\nA fully working example index.html is provided here:\r\n[index.html](https://github.research.chop.edu/BiG/mybic/wiki/Example-index.html)\r\n\r\n### Implementation\r\n\r\nWhen a project is created, one symlink is placed at `mybic/mybic/labs/templates/your_lab/your_project` that points to your index page and one is placed in `mybic/_site/static/your_lab/your_project` that points to static path your specify on the read-only Isilon mount.\r\n\r\n### Using Github for Serving Content\r\n[github.com](http://github.com), or our internal [github.research.chop.edu](https://github.research.chop.edu), is a functional website and can be used as:\r\n* The source from which index files are copied onto the myBiC site\r\n* A place to put static files (under 50MB)\r\n\r\n#### Using Github for the index page\r\nSimply specify the \"raw\" Github content (as opposed to \"blob\") hyperlink:\r\n`https://github.research.chop.edu/BiG/MD_vs_ATRT/raw/master/index.md`\r\n\r\nin the \"Index page\" field:\r\n\r\n![hyperlink](https://dl.dropboxusercontent.com/u/4055239/hyperlink.png)\r\n\r\nThe content can be Markdown or HTML, but template tags are still required.\r\n\r\nWhen using a hyperlink as the source, myBiC copies the content over, so _you will need to re-save your project to update the index page in myBiC_\r\n\r\n### Child index pages\r\nOften you may want to provide users with additional project detail pages that share the same navigation header as the main project index. Multiple \"child index pages\" can be created for any given project from the admin page. These use the same template tags as parents, and are provided an additional navigation layer within myBiC. \r\n\r\n#### How to create child pages\r\nFrom the \"Child Indices\" section at the bottom of the project admin panel (Django administration), provide a disk or http link as you would for the parent index. Hit save.\r\n\r\nWithin the parent index html or markdown, refer to these children using their basenames. For example, `https://github.research.chop.edu/zhangz/autism_microarrays/raw/master/Control_kid-vs-Patient_kid.md` is referred to `Control_kid-vs-Patient_kid.md` from the parent index. Do not use `index.html` or `index.md` as names.\r\n\r\nFor every link in the parent index html or markdown to be treated as a child page, you need to add an index as above.\r\n\r\n![](https://dl.dropboxusercontent.com/u/4055239/childindex.png)\r\n#### Using Github for the static content\r\nYou can link out to static content that is stored in Github. The easiest way is to right click on the Github site to access the link, then replace \"blob\" with \"raw\":\r\n`https://github.research.chop.edu/sassona/Demicco_ImmGen_v_Parclip/blob/master/B_GC_Sp_w_HuR_targets_subset_data_comparison.xlsx`\r\n\r\nbecomes:\r\n\r\n`https://github.research.chop.edu/sassona/Demicco_ImmGen_v_Parclip/raw/master/B_GC_Sp_w_HuR_targets_subset_data_comparison.xlsx`\r\n\r\n## Integration with knitr\r\nknitr with Rmarkdown syntax combined with the `DT` library is a preferable method of creating myBiC compatible output.\r\n\r\nSpecify the `output: html_document`\r\n```\r\n---\r\ntitle: \"My knitr report\"\r\nauthor: \"Jeremy Leipzig\"\r\ndate: \"May 28, 2015\"\r\noutput: html_document\r\n---\r\n```\r\n\r\nYou should now see the knit icon in RStudio:\r\n![](https://dl.dropboxusercontent.com/u/4055239/knit.png)\r\n\r\nknitr blocks should specify `fig.path='{{SLINK}}/'`. This will create a directory called (unfortunately) `{{SLINK}}` for static content, and this variable as it is embedded in the HTML output will be evaluated to the static directory specified in your myBiC project configuration.\r\n\r\nImages produced by knitr are saved but also converted to an inline [data URI scheme](https://en.wikipedia.org/wiki/Data_URI_scheme), but you can still provide links to those images.\r\n\r\n```\r\n```{r setup, echo=TRUE, message=FALSE, cache=FALSE, fig.path='{{SLINK}}/'}\r\n```\r\n\r\nThe datatables library will produce client-side sortable tables that can be embedded in your knitr document\r\n```\r\nlibrary(DT)\r\ndatatable(mtcars)\r\n```\r\n\r\nIdeally you should push the `.Rmd` and `.html` files to Github, and use the raw link in myBiC. Point your static directory to the `{{SLINK}}` directory in your project on the Isilon\r\n\r\n![](https://dl.dropboxusercontent.com/u/4055239/staticslink.png)\r\n\r\n\r\n##News\r\nNews can be at the site, lab, or project level. Markdown is accepted within the body.\r\n\r\n![](https://dl.dropboxusercontent.com/u/4055239/site_article.png)",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}